DROP table Customer cascade constraint;
DROP table purchase cascade constraint;
DROP table staff cascade constraint;
DROP table rating cascade constraint;
DROP table PurchaseDetails cascade constraint;
DROP table Comments cascade constraint;
DROP table genre cascade constraint;
DROP table product cascade constraint;
DROP table Inventory cascade constraint;
DROP table Format cascade constraint;

CREATE TABLE Customer
(Customer_ID VARCHAR2 (4),
Name VARCHAR2 (30),
Postal_Address VARCHAR2 (180),
Email VARCHAR2 (20),
Phone_no NUMBER (12),
Date_Of_Birth DATE,
CONSTRAINT Customer_Customer_ID_pk PRIMARY KEY (Customer_ID));

CREATE TABLE Staff
(Staff_ID VARCHAR2(4),
Name VARCHAR2(30),
Position VARCHAR2(10),
CONSTRAINT Staff_Staff_ID_pk PRIMARY KEY (Staff_ID));

CREATE TABLE Purchase
(Purchase_ID VARCHAR2 (4),
Customer_ID VARCHAR2 (4),
Staff_ID VARCHAR (4),
Purchase_Date DATE,
CONSTRAINT Purchase_Purchase_ID_pk PRIMARY KEY (Purchase_ID),
CONSTRAINT Purchase_Customer_ID_fk FOREIGN KEY (Customer_ID) REFERENCES Customer(Customer_ID),
CONSTRAINT Purchase_Staff_ID_fk FOREIGN KEY (Staff_ID) REFERENCES Staff(Staff_ID));

CREATE TABLE Format
(Format_ID VARCHAR2 (4),
Format_type VARCHAR2(20),
CONSTRAINT Format_Format_ID_pk PRIMARY KEY (Format_ID));

CREATE TABLE Genre
(Genre_ID VARCHAR2 (4),
Genre_Type VARCHAR (20),
CONSTRAINT Genre_Genre_ID_pk PRIMARY KEY (Genre_ID));

CREATE TABLE Product
(Product_ID VARCHAR2 (4),
Title VARCHAR2 (30),
Format_ID VARCHAR2 (4),
Genre_ID VARCHAR2 (4),
Key_Star_Featured VARCHAR2 (30),
Released_Year Date,
Cost NUMBER(4,2),
CONSTRAINT Product_Product_ID_pk PRIMARY KEY (Product_ID),
CONSTRAINT Product_Format_ID_fk FOREIGN KEY (Format_ID) REFERENCES Format(Format_ID),
CONSTRAINT Product_Genre_ID_fk FOREIGN KEY (Genre_ID) REFERENCES Genre(Genre_ID));

CREATE TABLE PurchaseDetails
(Details_ID VARCHAR2(4),
Purchase_ID VARCHAR2(4),
Product_ID VARCHAR2(4),
Quantity NUMBER (4),
CONSTRAINT PurchaseDetails_Details_ID_pk PRIMARY KEY (Details_ID),
CONSTRAINT PurchaseDetails_Purchase_ID_fk FOREIGN KEY (Purchase_ID) REFERENCES Purchase(Purchase_ID),
CONSTRAINT PurchaseDetails_Product_ID_fk FOREIGN KEY (Product_ID) REFERENCES Product(Product_ID));


CREATE TABLE Rating
(Rating_ID VARCHAR2(4),
Customer_ID VARCHAR2(4),
Details_ID VARCHAR2 (4),
Rating_For_DVD NUMBER(1),
Rating_Date DATE,
CONSTRAINT Rating_Rating_ID_pk PRIMARY KEY (Rating_ID),
CONSTRAINT Rating_Customer_ID_fk FOREIGN KEY (Customer_ID) REFERENCES Customer(Customer_ID),
CONSTRAINT Rating_Details_ID_fk FOREIGN KEY (Details_ID) REFERENCES PurchaseDetails(Details_ID));

CREATE TABLE Comments
(Comment_ID VARCHAR2(4),
Details_ID VARCHAR2(4),
Customer_ID VARCHAR2(4),
Comment_Given VARCHAR2 (50),
Comment_Date DATE,
CONSTRAINT Comments_Comment_ID_pk PRIMARY KEY (Comment_ID),
CONSTRAINT Comments_Customer_ID_fk FOREIGN KEY (Customer_ID) REFERENCES Customer(Customer_ID),
CONSTRAINT Comments_Details_ID_fk FOREIGN KEY (Details_ID) REFERENCES PurchaseDetails(Details_ID));

CREATE TABLE Inventory
(Inventory_ID VARCHAR2(4),
Goods_ID VARCHAR2(4),
Available_Quantity NUMBER(2),
Checked_Date DATE,
CONSTRAINT Inventory_Inventory_ID_pk PRIMARY KEY (Inventory_ID));

